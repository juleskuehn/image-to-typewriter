<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>kword X2</title>
    <link href="style.css" rel="stylesheet">
  </head>
  <body>
    <div id="topBar">
      <h1>kword</h1><a id="zoom" href="#">[+]</a>
      <div id="tabs">
        <button type="button" id="show_charset_crop" class="selected">Chop Charset</button>
        <button type="button" id="show_char_select">Select Chars</button>
        <button type="button" id="show_combos">View Combos</button>
        <button type="button" id="show_image_text">Image to Text</button>
        <button type="button" id="show_layers">Type Layers</button>
      </div>
    </div>
    <div id="sidebar">
      <div id="options">
        <div id="charset_options" class="show">
          <h3>Chopping Options</h3>
          <div>
            <input type="text" value="79" id="cols">
            <label>Columns</label>
          </div>
          <div>
            <input type="text" value="7" id="rows">
            <label>Rows</label>
          </div>
          <div>
            <input type="text" value="0.6" id="offsetX">
            <label>Grid Offset X</label>
          </div>
          <div>
            <input type="text" value="0.26" id="offsetY">
            <label>Grid Offset Y</label>
          </div>
          <div>
            <input type="text" value="1" id="colStart">
            <label>Crop Start Col</label>
          </div>
          <div>
            <input type="text" value="77" id="colEnd">
            <label>Crop End Col</label>
          </div>
          <div>
            <input type="text" value="1" id="rowStart">
            <label>Crop Start Row</label>
          </div>
          <div>
            <input type="text" value="6" id="rowEnd">
            <label>Crop End Row</label>
          </div><br>
          <div>
            <button type="button" id="chopCharset">Crop and Chop</button>
          </div><br>
          <div>
            <button type="button" id="genCombos">Generate Combos</button>
          </div>
        </div>
        <div id="image_options">
          <h3>Generator Options</h3>
          <div>
            <input type="range" id="row_length" min="1" max="100" value="40" step="1">
            <label><b>Row Length</b></label>
          </div>
          <div>
            <input type="range" id="customR" min="0" max="3" value="1" step="0.10">
            <label>Red</label>
          </div>
          <div>
            <input type="range" id="customG" min="0" max="3" value="1" step="0.10">
            <label>Green</label>
          </div>
          <div>
            <input type="range" id="customB" min="0" max="3" value="1" step="0.10">
            <label>Blue</label>
          </div>
          <div>
            <select id="bw">
              <option value="ccir">CCIR 601</option>
              <option value="cie">CIE Luma</option>
              <option value="flat">Equal</option>
              <option value="red">Red</option>
              <option value="green">Green</option>
              <option value="blue">Blue</option>
            </select>
            <label>B/W Conversion</label>
          </div>
          <div class="hidden">
            <input type="checkbox" id="dithering">
            <label>Dither</label>
          </div>
          <div class="hidden">
            <input type="checkbox" id="ditherFine" checked>
            <label>Dither Fine</label>
          </div>
          <div class="hidden">
            <input type="checkbox" id="considerSpill" checked>
            <label>Consider Spill?</label>
          </div>
          <div>
            <input type="range" id="spillRatioRight" min="0" max="1" value="1" step="0.1">
            <label>Spill Ratio R</label>
          </div>
          <div>
            <input type="range" id="spillRatioBottom" min="0" max="1" value="0.5" step="0.1">
            <label>Spill Ratio B</label>
          </div>
          <div>
            <input type="range" id="spillRatioBottomRight" min="0" max="1" value="0.2" step="0.1">
            <label>Spill Ratio BR</label>
          </div>
          <div> 
            <input type="range" id="spillRatio" min="0" max="1" value="0.5" step="0.05">
            <label><b>Spill Ratio</b></label>
          </div>
          <div>
            <input type="range" id="spillBrightness" min="0" max="1" value="0.5" step="0.05">
            <label>Spill Brightness</label>
          </div>
          <div class="hidden">
            <input type="range" id="ditherAmount" min="-1" max="1" value=".1" step="0.05">
            <label>Dither Strength</label>
          </div>
          <div>
            <input type="range" id="maxAdjust" min="0" max="1" value="1" step="0.05">
            <label><b>Max Weight</b></label>
          </div>
          <div>
            <input type="range" id="brightness" min="-128" max="128" value="0" step="1">
            <label>Brightness</label>
          </div>
          <div>
            <input type="range" id="shapeAmount" min="0" max="1" value="0.5" step="0.05">
            <label><b>Shape Amount</b></label>
          </div>
          <div>
            <input type="range" id="contrast" min="-128" max="128" value="0" step="1">
            <label>Contrast</label>
          </div>
        </div>
      </div>
      <div id="downloads">
        <h3>Download Output</h3>
        <div><a id="download" href="#">Combined mockup</a></div>
        <div><a id="download_layer_1" href="#">Top Left Layer</a></div>
        <div><a id="download_layer_2" href="#">Top Right Layer</a></div>
        <div><a id="download_layer_3" href="#">Bottom Left Layer</a></div>
        <div><a id="download_layer_4" href="#">Bottom Right Layer</a></div>
      </div>
    </div>
    <div id="viewport">
      <div id="view_show_charset_crop" class="show">
        <div id="charset-target">
          <h4>Drop Character Set Image Here</h4>
        </div>
        <div id="viewChop">
          <canvas id="charsetPreview" width="0" height="0" class="resize"></canvas>
          <canvas id="charsetOverlay" width="0" height="0" class="resize"></canvas>
        </div>
      </div>
      <div id="view_show_char_select">
        <div id="charQuadrants"></div>
        <div id="viewSelect"></div>
      </div>
      <div id="view_show_combos">
        <div id="comboPreview"></div>
      </div>
      <div id="view_show_image_text">
        <div id="image-target">
          <h4>Drop Image To Type Here</h4>
        </div>
        <canvas id="inputImage" style="display:none"></canvas>
        <canvas id="outputImage" width="0" height="0" class="resize"></canvas>
      </div>
      <div id="view_show_layers">
        <canvas id="layer1" class="resize"></canvas>
        <canvas id="layer2" class="resize"></canvas>
        <canvas id="layer3" class="resize"></canvas>
        <canvas id="layer4" class="resize"></canvas>
      </div>
    </div>
    <div id="instructions"><a id="closeInstructions" href="#">[X]</a>
      <h4>Instructions</h4>
      <ul>
        <li>Drag a <a href="hermes4.png">prepared</a> character set image into the main area. (Download the linked image, then drag it in).</li>
        <li>Click "Crop and Chop" in the left sidebar. This will preview the chop settings. Make adjustments with the controls in the left sidebar.</li>
        <li>When chop settings are correct, switch to "Select Chars" in the top bar. You can continue to make adjustments here.</li>
        <li>Select less than 10 characters by clicking on them, then click "Generate Combos". This can take some time.</li>
        <li>Switch to "View Combos" in the top bar (optional)</li>
        <li>Switch to "Image to Text" in the top bar. Drag a photo into the main area.</li>
        <li>Make adjustments using the controls in the left sidebar.</li>
        <li>Switch to "Type Layers" to view the 4 layers independently.</li>
        <li>The [+] icon in the top bar toggles zoom-to-fit.</li>
      </ul>
    </div>
    <script src="https://code.jquery.com/jquery-3.1.0.slim.min.js" integrity="sha256-cRpWjoSOw5KcyIOaZNo4i6fZ9tKPhYYb6i5T9RSVJG8=" crossorigin="anonymous"></script>
    <script src="underscore-min.js"></script>
    <script src="combinatorics.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="Char.js"></script>
    <script src="Combo.js"></script>
    <script src="kword.js"></script><script >(function(){
	/* Did we just livereload? */
var log = !!(localStorage && console && console.log && true);
if ( log && localStorage.getItem('/docpad-livereload/reloaded') === 'yes' ) {
	localStorage.removeItem('/docpad-livereload/reloaded');
	console.log('LiveReload completed at', new Date())
}

/* Listen for the regenerated event and perform a reload of the page when the event occurs */
var listen = function(){
	var primus = new Primus('/docpad-livereload');
	primus.on('data', function(data){
		if ( data && data.message ) {
			if ( data.message === 'generateBefore' ) {
				if ( log ) {
					console.log('LiveReload started at', new Date());
				}
				if ( typeof document.getElementsByTagName !== 'undefined' ) {
	document.getElementsByTagName('html')[0].className += ' wait';
}
			}
			else if ( data.message === 'generateAfter' ) {
				if ( log ) {
					localStorage.setItem('/docpad-livereload/reloaded', 'yes');
				}
				document.location.reload();
			}
		}
	});
};
	/* Inject socket into our page */
var inject = function(){
	var t = document.createElement('script');
	t.type = 'text/javascript';
	t.async = 'async';
	t.src = '/docpad-livereload/primus.js';
	t.onload = listen;
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(t, s);
};
	if ( typeof Primus !== 'undefined' ) {
		listen();
	} else {
		inject();
	}
})();</script>
  </body>
</html>